(()=>{"use strict";const e=function(e,t,n){let i,d;if(e||t)i=e,d=e;else{i=document.querySelector("#content");let e=document.getElementById("newTaskButton");i.removeChild(e),d=document.createElement("li"),i.appendChild(d)}d.setAttribute("class","addNewItemExpand");let c=document.createElement("input");c.setAttribute("class","main"),c.setAttribute("type","text"),d.appendChild(c);let l=document.createElement("label");l.textContent="Due Date",d.appendChild(l);let r=new Date;r=r.toISOString().slice(0,10);let o=document.createElement("input");o.setAttribute("class","date"),o.setAttribute("type","date"),o.setAttribute("placeholder","Date"),d.appendChild(o);let s=document.createElement("label");s.textContent="Priority",d.appendChild(s);let a=document.createElement("select");a.setAttribute("class","priority"),d.appendChild(a);let u=document.createElement("option");u.setAttribute("value","High"),u.textContent="High",t&&"High"===t.priority&&u.setAttribute("selected","selected"),a.appendChild(u);let p=document.createElement("option");p.setAttribute("value","Medium"),p.textContent="Medium",t&&"Medium"===t.priority&&p.setAttribute("selected","selected"),a.appendChild(p);let m=document.createElement("option");m.setAttribute("value","Low"),m.textContent="Low",t&&"Low"===t.priority&&m.setAttribute("selected","selected"),a.appendChild(m);let L=document.createElement("br");d.appendChild(L);let v=document.createElement("textarea");v.setAttribute("class","notes"),v.setAttribute("rows","4"),v.setAttribute("cols","50"),v.setAttribute("placeholder","Notes"),d.appendChild(v);let h=document.createElement("div");h.setAttribute("class","addButton"),d.appendChild(h),t?(c.setAttribute("id",`titleInputEdit-${n}`),c.setAttribute("value",`${t.title}`),o.setAttribute("id",`dateDueEdit-${n}`),o.setAttribute("value",`${t.dateDue}`),a.setAttribute("id",`priorityEdit-${n}`),v.setAttribute("id",`notesEdit-${n}`),v.innerHTML=`${t.notes}`,h.setAttribute("id",`editSubmit-${n}`),h.textContent="Update",document.getElementById(`titleInputEdit-${n}`).focus()):(c.setAttribute("id","titleInput"),o.setAttribute("id","dateDue"),o.setAttribute("value",`${r}`),a.setAttribute("id","priority"),v.setAttribute("id","notes"),h.setAttribute("id","submit"),h.textContent="Add",document.getElementById("titleInput").focus())},t=function(e){const t=e.projectsList,n=e.activeProjectIndex,i=document.querySelector(".projectWrapper");i.innerHTML="";for(let e=0;e<t.length;e++){let d=document.createElement("div");d.setAttribute("class","projectButton"),d.textContent=t[e].projectTitle,n===e&&d.classList.add("pressed"),i.appendChild(d)}},n=function(e,t,n){const i=e,d=t.dateDue,c=`${d[8]}${d[9]}/${d[5]}${d[6]}/${d[2]}${d[3]}`;let l=document.createElement("div");l.classList.add("listLower");let r=document.createElement("div");r.classList.add("dueDate"),r.innerHTML=`<em>Date: </em>${c}`;let o=document.createElement("div");o.classList.add("priority"),o.innerHTML=`<em>Priority: </em>${t.priority}`,l.appendChild(r),l.appendChild(o),i.appendChild(l);let s=document.createElement("div");s.classList.add("listLower");let a=document.createElement("div");a.classList.add("notes"),a.innerHTML=`${t.notes}`,s.appendChild(a),i.appendChild(s);let u=document.createElement("div");u.classList.add("listLower");let p=document.createElement("div");p.classList.add("editButton"),p.id=`edit-${n}`,p.textContent="Edit";let m=document.createElement("div");m.classList.add("deleteButton"),m.id=`del-${n}`,m.textContent="Delete",u.appendChild(p),u.appendChild(m),i.appendChild(u)},i={projectsList:[],activeProjectIndex:0,add:function(e){this.projectsList.push(e)},delete:function(e){this.projectsList.splice(e,1)},activeProjectName:function(){return this.projectsList[this.activeProjectIndex].projectTitle}};class d{constructor(e){this.projectTitle=e,this.itemList=[]}add(e){this.itemList.push(e)}delete(e){this.itemList.splice(e,1)}update(e,t){this.itemList.splice(t,1,e)}}class c{constructor(e,t,n,i,d){this.title=e,this.notes=t,this.dateDue=n,this.priority=i,this.projectName=d,this.done=!1}}const l=new d("Default"),r=new d("Music Project"),o=new c("Heat pan","First thing in the morning","2021-03-09","High","Default"),s=new c("Make pancakes","...","2021-03-09","Low","Default"),a=new c("Eat pancakes","...","2021-03-09","Low","Default"),u=new c("Play concert","Before bed.","2021-03-19","High","Music Project"),p=new c("Smash guitar","...","2021-03-19","High","Music Project");i.add(l),i.add(r),l.add(o),l.add(s),l.add(a),r.add(u),r.add(p);const m=function(){function l(){let e=document.querySelectorAll(".projectButton");e=Array.from(e);for(let n=0;n<e.length;n++)e[n].addEventListener("click",(()=>{i.activeProjectIndex=n,r(n),t(i),l(),u(),s()}))}function r(e){let n=document.querySelector(".upperPanel"),d=document.querySelector(".projectLabel");if(e){if(d.innerHTML=i.projectsList[e].projectTitle,document.querySelector(".projectDeleteButton"))return;let c=document.createElement("div");c.classList.add("projectDeleteButton"),c.textContent="Delete",n.appendChild(c),c.addEventListener("click",(()=>{!function(){let e=i.activeProjectIndex,n=i.projectsList[e].projectTitle,d=document.createElement("div");d.classList.add("modalBackground"),document.body.appendChild(d);let c=document.createElement("div");c.classList.add("modal");let l=document.createElement("div");l.innerHTML=`Are you sure you want to delete ${n}?<br>\n    All tasks in this project will be deleted permanently.`,l.classList.add("textBox"),c.appendChild(l);let r=document.createElement("div");r.classList.add("projectButton"),r.classList.add("modalButtons"),r.classList.add("ok"),r.textContent="OK",l.appendChild(r);let o=document.createElement("div");o.classList.add("projectButton"),o.classList.add("modalButtons"),o.textContent="Cancel",l.appendChild(o),document.body.appendChild(c),d.addEventListener("click",(()=>{document.body.removeChild(c),document.body.removeChild(d)})),r.addEventListener("click",(()=>{i.delete(e),i.activeProjectIndex=0,m.updateProjectListTitle(0),t(i),document.body.removeChild(c),document.body.removeChild(d),m.projectsListListeners(),m.renderTaskList(),m.newProjectButton()})),o.addEventListener("click",(()=>{document.body.removeChild(c),document.body.removeChild(d)}))}()}))}else d.innerHTML="To Do List",n.removeChild(document.querySelector(".projectDeleteButton"))}function o(e){let t,n,d,l,r=i.activeProjectName();if("click"===e.type||"Enter"===e.key){if(t=document.querySelector("#titleInput").value,n=document.querySelector("#notes").value,d=document.querySelector("#dateDue").value,l=document.querySelector("#priority").value,!t)return}else t=e;let o=new c(t,n,d,l,r),s=i.activeProjectIndex;i.projectsList[s].add(o),document.querySelector("#titleInput").value="",u()}function s(e){if(!e){let e=document.querySelector(".projectWrapper"),t=document.createElement("div");t.id="newProjectButton",t.classList.add("projectNewButton"),t.textContent="Add New Project",t.addEventListener("click",(()=>{e.removeChild(t);let n=function(e){let t=document.createElement("div");t.classList.add("projectNewButtonPressed"),e.appendChild(t);let n=document.createElement("input");n.setAttribute("class","projectInput"),n.setAttribute("type","text"),n.setAttribute("id","newProject"),t.appendChild(n),n.focus();let i=document.createElement("div");return i.setAttribute("class","addButton"),i.setAttribute("id","projectSubmit"),i.textContent="Add",e.appendChild(i),{input:n,buttonAdd:i}}(e);n.input.addEventListener("keypress",(function(e){if("Enter"===e.key){if(!n.input.value)return;a(n.input.value)}})),n.buttonAdd.addEventListener("click",(()=>{n.input.value&&a(n.input.value)}))})),e.appendChild(t)}}function a(e){i.activeProjectIndex=i.projectsList.length;let n=new d(e);i.add(n),r(i.activeProjectIndex),t(i),l(),u(),s()}function u(){let t=document.querySelector("#content");t.innerHTML="";let d=i.activeProjectIndex;for(let e=0;e<i.projectsList[d].itemList.length;e++){let c=document.createElement("li");c.classList.add("listItem");let l=document.createElement("div");l.classList.add("listUpper"),l.textContent=i.projectsList[d].itemList[e].title,c.appendChild(l);let r=document.createElement("div");r.classList.add("pressZone");let o=document.createElement("div");o.classList.add("itemTriangle"),r.appendChild(o),l.appendChild(r);let s=document.createElement("div");s.classList.add("listLowerSecton"),c.appendChild(s),r.addEventListener("click",(()=>{if(o.classList.contains("flipped"))o.classList.remove("flipped"),s.innerHTML="";else{o.classList.add("flipped"),n(s,i.projectsList[d].itemList[e],e);let t=c.querySelector(".deleteButton");t.addEventListener("click",(()=>{let e=t.id.split("-");i.projectsList[d].delete(e[1]),u()}));let l=c.querySelector(".editButton");l.addEventListener("click",(()=>{l.id.split("-"),L(c,i.projectsList[d].itemList[e],e)}))}})),t.appendChild(c)}!function(){let t=document.querySelector("#content"),n=document.createElement("li");n.id="newTaskButton",n.classList.add("addNewItem"),n.textContent="Add new task",t.appendChild(n),n.addEventListener("click",(()=>{e(),submit.addEventListener("click",o),titleInput.addEventListener("keypress",(function(e){"Enter"===e.key&&o(e)}))}))}()}return t(i),l(),u(),s(),{addToList:o,renderTaskList:u,projectsListListeners:l,updateProjectListTitle:r,renderProjectsList:t,newProjectButton:s}}();function L(t,n,i){t.innerHTML="",e(t,n,i);let d=document.querySelector(`#editSubmit-${i}`),c=document.getElementById(`titleInputEdit-${i}`);d.addEventListener("click",(e=>{v(e,i)})),c.addEventListener("keypress",(function(e){"Enter"===e.key&&v(e,i)}))}function v(e,t){let n,d,l,r,o=i.activeProjectName();if(("click"===e.type||"Enter"===e.key)&&(n=document.querySelector(`#titleInputEdit-${t}`).value,d=document.querySelector(`#notesEdit-${t}`).value,l=document.querySelector(`#dateDueEdit-${t}`).value,r=document.querySelector(`#priorityEdit-${t}`).value,!n))return;let s=new c(n,d,l,r,o),a=i.activeProjectIndex;i.projectsList[a].update(s,t),m.renderTaskList()}})();