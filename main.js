(()=>{"use strict";const t=function(t,e,i){let n,d;if(t||e)n=t,d=t;else{n=document.querySelector("#content");let t=document.getElementById("newTaskButton");n.removeChild(t),d=document.createElement("li"),n.appendChild(d)}d.setAttribute("class","addNewItemExpand");let s=document.createElement("input");s.setAttribute("class","main"),s.setAttribute("type","text"),d.appendChild(s);let c=document.createElement("label");c.textContent="Due Date",d.appendChild(c);let l=new Date;l=l.toISOString().slice(0,10);let o=document.createElement("input");o.setAttribute("class","date"),o.setAttribute("type","date"),o.setAttribute("placeholder","Date"),d.appendChild(o);let r=document.createElement("label");r.textContent="Priority",d.appendChild(r);let a=document.createElement("select");a.setAttribute("class","priority"),d.appendChild(a);let u=document.createElement("option");u.setAttribute("value","High"),u.textContent="High",e&&"High"===e.priority&&u.setAttribute("selected","selected"),a.appendChild(u);let p=document.createElement("option");p.setAttribute("value","Medium"),p.textContent="Medium",e&&"Medium"===e.priority&&p.setAttribute("selected","selected"),a.appendChild(p);let m=document.createElement("option");m.setAttribute("value","Low"),m.textContent="Low",e&&"Low"===e.priority&&m.setAttribute("selected","selected"),a.appendChild(m);let L=document.createElement("br");d.appendChild(L);let h=document.createElement("textarea");h.setAttribute("class","notes"),h.setAttribute("rows","4"),h.setAttribute("cols","50"),h.setAttribute("placeholder","Notes"),d.appendChild(h);let v=document.createElement("div");v.setAttribute("class","formButtonContainer"),d.appendChild(v);let E=document.createElement("div");E.setAttribute("class","addButton"),E.textContent="Cancel",v.appendChild(E);let C=document.createElement("div");C.setAttribute("class","addButton"),v.appendChild(C),e?(s.setAttribute("id",`titleInputEdit-${i}`),s.setAttribute("value",`${e.title}`),o.setAttribute("id",`dateDueEdit-${i}`),o.setAttribute("value",`${e.dateDue}`),a.setAttribute("id",`priorityEdit-${i}`),h.setAttribute("id",`notesEdit-${i}`),h.innerHTML=`${e.notes}`,C.setAttribute("id",`editSubmit-${i}`),E.setAttribute("id",`editCancel-${i}`),C.textContent="Update",document.getElementById(`titleInputEdit-${i}`).focus()):(s.setAttribute("id","titleInput"),o.setAttribute("id","dateDue"),o.setAttribute("value",`${l}`),a.setAttribute("id","priority"),h.setAttribute("id","notes"),C.setAttribute("id","submit"),E.setAttribute("id","cancel"),C.textContent="Add",document.getElementById("titleInput").focus())},e=function(t){const e=t.projectsList,i=t.activeProjectIndex,n=document.querySelector(".projectWrapper");n.innerHTML="";for(let t=0;t<e.length;t++){let d=document.createElement("div");d.setAttribute("class","projectButton"),d.textContent=e[t].projectTitle,i===t&&d.classList.add("pressed"),n.appendChild(d)}},i=function(t,e,i){const n=t,d=e.dateDue,s=`${d[8]}${d[9]}/${d[5]}${d[6]}/${d[2]}${d[3]}`;let c=document.createElement("div");c.classList.add("listLower");let l=document.createElement("div");l.classList.add("dueDate"),l.innerHTML=`<em>Date: </em>${s}`;let o=document.createElement("div");o.classList.add("priority"),o.innerHTML=`<em>Priority: </em>${e.priority}`,c.appendChild(l),c.appendChild(o),n.appendChild(c);let r=document.createElement("div");r.classList.add("listLower");let a=document.createElement("div");a.classList.add("notes"),a.innerHTML=`${e.notes}`,r.appendChild(a),n.appendChild(r);let u=document.createElement("div");u.classList.add("listLower");let p=document.createElement("div");p.classList.add("editButton"),p.id=`edit-${i}`,p.textContent="Edit";let m=document.createElement("div");m.classList.add("deleteButton"),m.id=`del-${i}`,m.textContent="Delete",u.appendChild(p),u.appendChild(m),n.appendChild(u)},n={projectsList:[],activeProjectIndex:0,add:function(t){this.projectsList.push(t)},delete:function(t){this.projectsList.splice(t,1)},activeProjectName:function(){return this.projectsList[this.activeProjectIndex].projectTitle}};class d{constructor(t){this.projectTitle=t,this.itemList=[]}add(t){this.itemList.push(t)}delete(t){this.itemList.splice(t,1)}update(t,e){this.itemList.splice(e,1,t)}markAsDone(t){this.itemList[t].changeStatus()}sortItemsByDate(){this.itemList=this.itemList.sort(((t,e)=>parseInt(t.dateDue.split("-").join(""))>parseInt(e.dateDue.split("-").join(""))?1:-1))}sortItemsByPriority(){this.itemList=this.itemList.sort(((t,e)=>{let i,n;switch(t.priority){case"High":i=3;break;case"Medium":i=2;break;case"Low":i=1}switch(e.priority){case"High":n=3;break;case"Medium":n=2;break;case"Low":n=1}return i<n?1:-1}))}}class s{constructor(t,e,i,n,d){this.title=t,this.notes=e,this.dateDue=i,this.priority=n,this.projectName=d,this.done=!1}changeStatus(){!1===this.done?this.done=!0:this.done=!1}}const c=new d("Default"),l=new s("Make pancakes","Mix flour, eggs and milk in a bowl.","2021-03-11","Low","Default"),o=new s("Heat pan","First thing in the morning","2021-03-10","High","Default"),r=new s("Eat pancakes","Remember lemon and sugar.","2021-03-12","Low","Default");n.add(c),c.add(l),c.add(o),c.add(r),function(){function c(){let t=document.querySelectorAll(".projectButton");t=Array.from(t);for(let i=0;i<t.length;i++)t[i].addEventListener("click",(()=>{n.activeProjectIndex=i,l(i),e(n),c(),p(),a()}))}function l(t){let i=document.querySelector(".upperPanel"),d=document.querySelector(".projectLabel");if(0===t)i.innerHTML="",d.textContent="To Do List",i.appendChild(d),s();else{i.innerHTML="",d.textContent=n.projectsList[t].projectTitle,i.appendChild(d),s();let o=document.createElement("div");o.classList.add("projectDeleteButton"),o.textContent="Delete",i.appendChild(o),o.addEventListener("click",(()=>{!function(){let t=n.activeProjectIndex,i=function(t,e){let i=t.projectsList[e].projectTitle,n=document.createElement("div");n.classList.add("modalBackground"),document.body.appendChild(n);let d=document.createElement("div");d.classList.add("modal");let s=document.createElement("div");s.innerHTML=`Are you sure you want to delete ${i}?<br>\n    All tasks in this project will be deleted permanently.`,s.classList.add("textBox"),d.appendChild(s);let c=document.createElement("div");c.classList.add("projectButton"),c.classList.add("modalButtons"),c.classList.add("ok"),c.textContent="OK",s.appendChild(c);let l=document.createElement("div");return l.classList.add("projectButton"),l.classList.add("modalButtons"),l.textContent="Cancel",s.appendChild(l),document.body.appendChild(d),{index:e,modalBackground:n,modal:d,okButton:c,cancelButton:l}}(n,t);i.modalBackground.addEventListener("click",(()=>{document.body.removeChild(i.modal),document.body.removeChild(i.modalBackground)})),i.okButton.addEventListener("click",(()=>{n.delete(t),n.activeProjectIndex=0,l(0),e(n),document.body.removeChild(i.modal),document.body.removeChild(i.modalBackground),c(),p(),a()})),i.cancelButton.addEventListener("click",(()=>{document.body.removeChild(i.modal),document.body.removeChild(i.modalBackground)}))}()}))}function s(){let t=n.activeProjectIndex,e=document.createElement("div");e.classList.add("projectSortButton"),e.textContent="Sort by Date",i.appendChild(e),e.addEventListener("click",(()=>{n.projectsList[t].sortItemsByDate(),p()}));let d=document.createElement("div");d.classList.add("projectSortButton"),d.textContent="Sort by Priority",i.appendChild(d),d.addEventListener("click",(()=>{n.projectsList[t].sortItemsByDate(),n.projectsList[t].sortItemsByPriority(),p()}))}}function o(t,e){let i,d,c,l,o,r=n.activeProjectName();if(o=void 0===e?"":`Edit-${e}`,("click"===t.type||"Enter"===t.key)&&(i=document.querySelector(`#titleInput${o}`).value,d=document.querySelector(`#notes${o}`).value,c=document.querySelector(`#dateDue${o}`).value,l=document.querySelector(`#priority${o}`).value,!i))return;let a=new s(i,d,c,l,r),u=n.activeProjectIndex;void 0===e?(n.projectsList[u].add(a),document.querySelector("#titleInput").value=""):n.projectsList[u].update(a,e),p()}function r(e,i,n){e.innerHTML="",t(e,i,n);let d=document.querySelector(`#editSubmit-${n}`),s=document.querySelector(`#editCancel-${n}`),c=document.getElementById(`titleInputEdit-${n}`);d.addEventListener("click",(t=>{o(t,n)})),s.addEventListener("click",(()=>{m()})),c.addEventListener("keypress",(function(t){"Enter"===t.key&&o(t,n)}))}function a(t){if(!t){let t=document.querySelector(".projectWrapper"),e=document.createElement("div");e.id="newProjectButton",e.classList.add("projectNewButton"),e.textContent="Add New Project",e.addEventListener("click",(()=>{t.removeChild(e);let i=function(t){let e=document.createElement("div");e.classList.add("projectNewButtonPressed"),t.appendChild(e);let i=document.createElement("input");i.setAttribute("class","projectInput"),i.setAttribute("type","text"),i.setAttribute("id","newProject"),e.appendChild(i),i.focus();let n=document.createElement("div");return n.setAttribute("class","addButton"),n.setAttribute("id","projectSubmit"),n.textContent="Add",t.appendChild(n),{input:i,buttonAdd:n}}(t);i.input.addEventListener("keypress",(function(t){if("Enter"===t.key){if(!i.input.value)return;u(i.input.value)}})),i.buttonAdd.addEventListener("click",(()=>{i.input.value&&u(i.input.value)}))})),t.appendChild(e)}}function u(t){n.activeProjectIndex=n.projectsList.length;let i=new d(t);n.add(i),l(n.activeProjectIndex),e(n),c(),p(),a()}function p(){let e=document.querySelector("#content");e.innerHTML="";let d=n.activeProjectIndex;for(let t=0;t<n.projectsList[d].itemList.length;t++){let s=document.createElement("li");s.classList.add("listItem");let c=document.createElement("div");c.classList.add("listUpper"),c.id=`list-${t}`,c.textContent=n.projectsList[d].itemList[t].title,c.addEventListener("click",(e=>{e.path[0]===c&&(n.projectsList[d].markAsDone(t),p())})),s.appendChild(c),!0===n.projectsList[d].itemList[t].done&&c.classList.add("taskDoneText");let l=document.createElement("div");l.classList.add("pressZone");let o=document.createElement("div");o.classList.add("itemTriangle"),l.appendChild(o),c.appendChild(l);let a=document.createElement("div");a.classList.add("listLowerSecton"),s.appendChild(a),l.addEventListener("click",(()=>{if(o.classList.contains("flipped"))o.classList.remove("flipped"),a.innerHTML="";else{o.classList.add("flipped"),i(a,n.projectsList[d].itemList[t],t);let e=s.querySelector(".deleteButton");e.addEventListener("click",(()=>{let t=e.id.split("-");n.projectsList[d].delete(t[1]),p()}));let c=s.querySelector(".editButton");c.addEventListener("click",(()=>{c.id.split("-"),r(s,n.projectsList[d].itemList[t],t)}))}})),e.appendChild(s)}!function(){let e=document.querySelector("#content"),i=document.createElement("li");i.id="newTaskButton",i.classList.add("addNewItem"),i.textContent="Add new task",e.appendChild(i),i.addEventListener("click",(()=>{t(),submit.addEventListener("click",(t=>{o(t)})),cancel.addEventListener("click",(()=>m())),titleInput.addEventListener("keypress",(function(t){"Enter"===t.key&&o(t)}))}))}()}function m(){p()}e(n),c(),p(),a(),l(0)}()})();